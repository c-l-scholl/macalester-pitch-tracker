(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[216],{2266:function(e,t,l){Promise.resolve().then(l.bind(l,3845))},3845:function(e,t,l){"use strict";l.d(t,{default:function(){return F}});var a=l(7437),s=l(2265);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,l(8030).Z)("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);var n=l(6908),i=l(495);let c=e=>{let{onEdit:t,onDelete:l}=e;return[{accessorKey:"fullName",header:"Pitcher"},{accessorKey:"pitchDate",header:e=>{let{column:t}=e;return(0,a.jsxs)(i.z,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),children:["Date",(0,a.jsx)(r,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e,l=t.getValue("pitchDate").toDate(),s="".concat(l.getMonth()+1,"/").concat(l.getDate(),"/").concat(l.getFullYear());return(0,a.jsx)("div",{className:"text-left font-medium",children:s})}},{accessorKey:"batterHand",header:"Batter"},{accessorKey:"velocity",header:"Velocity",cell:e=>{let{row:t}=e,l=parseFloat(t.getValue("velocity"));return(0,a.jsx)("div",{className:"text-left font-medium",children:"".concat(l," mph")})}},{accessorKey:"pitchType",header:"Pitch Type"},{accessorKey:"result",header:"Result"},{id:"actions",cell:e=>{let{row:s}=e;return(0,a.jsx)(n.Z,{row:s,onEdit:t,onDelete:l})}}]};var d=l(3514),o=l(4175),u=l(6975),h=l(3102),x=e=>{var t,l,r;let{columns:n,data:c}=e,[x,p]=(0,s.useState)([]),[m,f]=(0,s.useState)([]),g=(0,d.b7)({data:c,columns:n,getCoreRowModel:(0,o.sC)(),getPaginationRowModel:(0,o.G_)(),onSortingChange:p,getSortedRowModel:(0,o.tj)(),onColumnFiltersChange:f,getFilteredRowModel:(0,o.vL)(),state:{sorting:x,columnFilters:m}});return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex items-center py-4",children:(0,a.jsx)(h.I,{placeholder:"Filter by pitch type...",value:null!==(r=null===(t=g.getColumn("pitchType"))||void 0===t?void 0:t.getFilterValue())&&void 0!==r?r:"",onChange:e=>{var t;return null===(t=g.getColumn("pitchType"))||void 0===t?void 0:t.setFilterValue(e.target.value)},className:"max-w-sm"})}),(0,a.jsx)("div",{className:"rounded-md border",children:(0,a.jsxs)(u.iA,{children:[(0,a.jsx)(u.xD,{children:g.getHeaderGroups().map(e=>(0,a.jsx)(u.SC,{children:e.headers.map(e=>(0,a.jsx)(u.ss,{children:e.isPlaceholder?null:(0,d.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,a.jsx)(u.RM,{children:(null===(l=g.getRowModel().rows)||void 0===l?void 0:l.length)?g.getRowModel().rows.map(e=>(0,a.jsx)(u.SC,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,a.jsx)(u.pj,{children:(0,d.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,a.jsx)(u.SC,{children:(0,a.jsx)(u.pj,{colSpan:n.length,className:"h-24 text-center",children:"No results."})})})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-2 py-4",children:[(0,a.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>g.previousPage(),disabled:!g.getCanPreviousPage(),children:"Previous"}),(0,a.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>g.nextPage(),disabled:!g.getCanNextPage(),children:"Next"})]})]})},p=l(2278),m=l(9842),f=l(5657),g=l(5255),j=l(7440);let v=s.forwardRef((e,t)=>{let{className:l,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,j.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",l),...s})});v.displayName="Card";let y=s.forwardRef((e,t)=>{let{className:l,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,j.cn)("flex flex-col space-y-1.5 p-6",l),...s})});y.displayName="CardHeader";let w=s.forwardRef((e,t)=>{let{className:l,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,j.cn)("text-2xl font-semibold leading-none tracking-tight",l),...s})});w.displayName="CardTitle";let N=s.forwardRef((e,t)=>{let{className:l,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,j.cn)("text-sm text-muted-foreground",l),...s})});N.displayName="CardDescription";let C=s.forwardRef((e,t)=>{let{className:l,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,j.cn)("p-6 pt-0",l),...s})});C.displayName="CardContent",s.forwardRef((e,t)=>{let{className:l,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,j.cn)("flex items-center p-6 pt-0",l),...s})}).displayName="CardFooter";let S=e=>{let t=0,l=0,a=0,s=0;return null==e||e.forEach(e=>{"Right"===e.batterHand?(a++,"Ball"!==e.result&&t++):"Left"===e.batterHand&&(s++,"Ball"!==e.result&&l++)}),s=0===s?1:s,a=0===a?1:a,"".concat(Math.round(100*l/s),"% / \n					").concat(Math.round(100*t/a),"%")},b=e=>{let t=0,l=0,a=0,s=0;e.forEach(e=>{if("Right"===e.batterHand)switch(e.result){case"Out":a++;break;case"H":a++,t+=1;break;case"2B":a++,t+=2;break;case"3B":a++,t+=3;break;case"HR":a++,t+=4}else switch(e.result){case"Out":s++;break;case"H":s++,l+=1;break;case"2B":s++,l+=2;break;case"3B":s++,l+=3;break;case"HR":s++,l+=4}});let r=s>0?1e3*l/s:0,n=k(a>0?1e3*t/a:0),i=k(r);return"".concat(i," / ").concat(n)},k=e=>{if(0===e)return".000";let t=String((e/=1e3).toFixed(3));return e>=1?t:"".concat(t)};var R=e=>{let{pitchType:t,pitchList:l}=e,[r,n]=(0,s.useState)(!1),[i,c]=(0,s.useState)(null),[d,o]=(0,s.useState)(""),[u,h]=(0,s.useState)("");return(0,s.useEffect)(()=>{c(null!=l?l:null),i&&i.length>0?(o(S(i)),h(b(i)),n(!0)):n(!1)},[l,i]),(0,a.jsx)("div",{children:r&&(0,a.jsx)("div",{children:(0,a.jsxs)(v,{children:[(0,a.jsxs)(y,{children:[(0,a.jsx)(w,{children:t}),(0,a.jsx)(N,{children:"Stat: vs. Lefty / vs. Righty"})]}),(0,a.jsx)(C,{children:(0,a.jsxs)("p",{children:["K%: ",d]})}),(0,a.jsx)(C,{children:(0,a.jsxs)("p",{children:["SLG: ",u]})})]})})})},D=e=>{let{pitchData:t}=e,[l,r]=(0,s.useState)(null),n=new Map;return(0,s.useEffect)(()=>{if(n.clear(),t&&t.length>0)for(let l of t){var e;let t=null!==(e=n.get(l.pitchType))&&void 0!==e?e:[];t.push(l),n.set(l.pitchType,t)}r(null!=n?n:null)},[t]),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"flex flex-col gap-2 w-full",children:l&&Array.from(l.entries()).map(e=>{let[t,l]=e;return(0,a.jsx)("div",{children:(0,a.jsx)(R,{pitchType:l[0].pitchType,pitchList:l})},t)})})})},P=l(8983),M=l(4982),E=l(6294);function F(){let{toast:e}=(0,f.pm)(),[t,l]=(0,s.useState)(!1),[r,n]=(0,s.useState)([]),[d,o]=(0,s.useState)(""),[u,h]=(0,s.useState)(null),[j,v]=(0,s.useState)(null),[y,w]=(0,s.useState)(""),[N,C]=(0,s.useState)(!1),[S,b]=(0,s.useState)(null),k=e=>{C(!1),e||b(null)},R=c({onEdit:e=>{b(e),C(!0)},onDelete:async t=>{l(!0),k(!1);try{if(void 0!=t.id){let l=(0,m.JU)(p.db,"pitches",t.id);await (0,m.oe)(l),e({description:"Pitch deleted successfully"})}}catch(t){e({title:"Uh oh! Something went wrong.",description:"There was a problem with your pitch deletion attempt. Please try again.",variant:"destructive"})}l(!1)}});return(0,s.useEffect)(()=>{h(null),w("")},[d]),(0,s.useEffect)(()=>{if(l(!0),u){let e=(0,M.Z)(d,u,e=>{n(e.docs.map(e=>({...e.data(),id:e.id})))});return l(!1),()=>e()}{let e=(0,M.R)(d,e=>{let t=e.docs.map(e=>({...e.data(),id:e.id}));n(t);let l=new Map;t.forEach(e=>{let t=e.pitchDate.toDate();l.set(t.toDateString(),t)}),v(l)});return l(!1),()=>e()}},[d,u,n]),(0,a.jsxs)("div",{className:"flex flex-row",children:[(0,a.jsx)("div",{className:"sticky min-w-[300px] border-r min-h-screen items-start",children:(0,a.jsxs)("div",{className:"flex flex-col gap-2 p-4 items-start",children:[(0,a.jsx)(P.Z,{setSelectedPitcherName:o}),(0,a.jsxs)(E.Ph,{value:y,onValueChange:e=>{var t;h(null!==(t=null==j?void 0:j.get(e))&&void 0!==t?t:null),w(e)},children:[(0,a.jsx)(E.i4,{className:"w-[180px]",children:(0,a.jsx)(E.ki,{placeholder:"Select a date..."})}),(0,a.jsx)(E.Bw,{children:j&&Array.from(j.keys()).map(e=>(0,a.jsx)(E.Ql,{value:e,children:"".concat(e)},e))})]}),(0,a.jsx)(i.z,{onClick:()=>{h(null),w("")},children:"Get All Pitches"}),(0,a.jsx)(D,{pitchData:r})]})}),(0,a.jsxs)("div",{className:"flex-grow p-4 mx-4",children:[(0,a.jsxs)("div",{className:"flex flex-row justify-between items-center mb-2",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold ",children:"Pitcher Data"}),(0,a.jsx)(g.Z,{pitchCount:r.length})]}),t&&(0,a.jsx)("span",{children:"Loading"}),!t&&(0,a.jsx)(x,{columns:R,data:r})]})]})}}},function(e){e.O(0,[358,898,558,311,447,847,971,23,744],function(){return e(e.s=2266)}),_N_E=e.O()}]);